---
title: æˆ‘çš„Dockeræœ€ä½³å®è·µ
date: 2024-03-29T16:46:31.000
slug: /docker-best-practices
draft: false
tags:
  - Docker
categories:
  - Docker
series:
  - Docker
enableTOC: false
---

## æˆ‘çš„Dockeræœ€ä½³å®è·µ

### 1. ç½‘ç»œåŠ é€Ÿ

Docker Desktopï¼šSettings -> Resources -> Proxies -> âœ… Manual proxy configuration

é•œåƒ

æ¨èä½¿ç”¨ï¼š[æ¯«ç§’é•œåƒ](https://1ms.run/)

å…¶ä»–æ±‡æ€»ï¼š[ç›®å‰å›½å†…å¯ç”¨Dockeré•œåƒæºæ±‡æ€»ï¼ˆæˆªè‡³2025å¹´1æœˆï¼‰ - CoderJia](https://www.coderjia.cn/archives/dba3f94c-a021-468a-8ac6-e840f85867ea) 

### 2. éƒ¨ç½²æ–¹å¼åŠè·¯å¾„ç»Ÿä¸€

é€šè¿‡ docker compose çš„æ–¹å¼è¿›è¡Œéƒ¨ç½²ï¼Œæ‰€æœ‰çš„`compose.yml`ä»¥åŠå®¹å™¨çš„æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„ä¸åŒ container åç§°å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œæœ€ç»ˆç”Ÿæˆå¤§æ¦‚å¦‚ä¸‹çš„æ•°æ®ç»“æ„ï¼š

```html
ğŸ“‚docker
â”œâ”€â”€ ğŸ“‚allinone
â”‚Â Â  â””â”€â”€ ğŸ“„compose.yml
â”œâ”€â”€ ğŸ“‚allinone_format
â”‚Â Â  â”œâ”€â”€ ğŸ“„compose.yml
â”‚Â Â  â””â”€â”€ config
â”œâ”€â”€ ğŸ“‚ddns-go
â”‚Â Â  â””â”€â”€ ğŸ“„compose.yml
â”œâ”€â”€ ğŸ“‚moviepilot
â”‚Â Â  â”œâ”€â”€ ğŸ“„compose.yml
â”‚Â Â  â”œâ”€â”€ ğŸ“‚config
â”‚Â Â  â””â”€â”€ ğŸ“‚core
â”œâ”€â”€ ğŸ“‚portainer-ce
â”‚Â Â  â”œâ”€â”€ ğŸ“„compose.yml
â”‚Â Â  â””â”€â”€ ğŸ“‚data
â”œâ”€â”€ ğŸ“‚qbittorrent
â”‚Â Â  â”œâ”€â”€ ğŸ“‚appdata
â”‚Â Â  â””â”€â”€ ğŸ“„compose.yml
â””â”€â”€ ğŸ“‚qinglong
    â”œâ”€â”€ ğŸ“„compose.yaml
    â””â”€â”€ ğŸ“‚data
```

å¦å¤–ï¼Œæˆ‘è¿™é‡Œé‡åˆ°çš„é—®é¢˜æ¯”è¾ƒç‰¹æ®Šï¼Œè¿™é‡Œä¹Ÿåˆ—ä¸¾å‡ºæ¥ï¼Œæˆ‘æ˜¯åœ¨ Win11 å®‰è£…çš„ Docker Desktopï¼Œç„¶åå‡ºäºä¸€äº›åŸå› åˆå®‰è£…äº†`WSL2ï¼ˆ Ubuntu 24.04.1 LTSï¼‰`å¹¶ä¸”é›†æˆäº† WSL integrationï¼Œç„¶ååœ¨ WSL ä¸Šé¢éƒ¨ç½²äº†ä¸€äº› Docker é¡¹ç›®ï¼Œè¿™å°±å¯¼è‡´äº†æˆ‘çš„ compose.yml å¾ˆä¹±ï¼Œç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ä¸¤ç§å†™æ³•æ··æ‚ï¼Œå¦å¤– windows çš„è·¯å¾„å’Œ Ubuntu çš„è·¯å¾„ä¹Ÿéƒ½æœ‰ï¼Œå¾ˆä¸æ–¹ä¾¿æœªæ¥çš„è¿ç§»ï¼Œäºæ˜¯æˆ‘ç»Ÿä¸€äº† compose æ–‡ä»¶ä¸­å…³äºè·¯å¾„çš„å¤„ç†ï¼Œç›¸å…³çš„æµç¨‹å¦‚ä¸‹ï¼š

```bash
### åœ¨ Windows PowerShellï¼ˆç®¡ç†å‘˜æƒé™ï¼‰ä¸­æ‰§è¡Œ
mkdir C:\opt\docker
[Environment]::SetEnvironmentVariable("DOCKER_DIR", "C:\opt\docker", "User")

### åœ¨ WSL ç»ˆç«¯ä¸­æ‰§è¡Œ
echo 'export DOCKER_DIR="/mnt/c/opt/docker"' >> ~/.bashrc
source ~/.bashrc

### WSLä¸­æ‰§è¡Œè¿ç§»ï¼ˆå‡è®¾åŸWSLé¡¹ç›®åœ¨ /home/kiwi4814/docker/ ï¼‰
sudo rsync -avh --progress /home/kiwi4814/docker/ /mnt/c/opt/docker/
sudo rm -rf ~/docker

### åœ¨ Windows éªŒè¯è¿ç§»ç»“æœ
dir C:\opt\docker

### ä¿®æ”¹ compose.yml æ–‡ä»¶
volumes:
  - "${DOCKER_DIR}/project_name/config:/config"
  - "${DOCKER_DIR}/project_name/data:/data"
  - "${DOCKER_DIR}/common:/shared"
  
### éªŒè¯ - windows
cd C:\opt\docker\project_name
docker-compose up -d
docker exec moviepilot cmd /c "dir C:\config"

### éªŒè¯ - WSL
cd /mnt/c/opt/docker/moviepilot
docker-compose up -d
docker exec -it moviepilot ls /config

### Dockeré¡¹ç›®è¿ç§»å¹¶é‡å¯
# æ¸…ç†æ—§å®¹å™¨ï¼ˆä¿ç•™æ•°æ®å·ï¼‰
docker compose down
# è¿™é‡Œæ˜¯æ›´æ–°çš„å‘½ä»¤ï¼Œä¸æ›´æ–°åˆ™ä¸æ‰§è¡Œ
docker-compose pull
# å¼ºåˆ¶é‡å»ºå®¹å™¨ï¼ˆä½¿ç”¨æ–°é…ç½®ï¼‰
docker compose up -d --force-recreate
# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker-compose logs -f --tail=100
```

æ­¤å¤–ï¼Œåœ¨æ‰§è¡Œå®Œä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼Œå»ºè®®åˆ° WSL ä¸‹å»æ‰§è¡ŒDockerå®¹å™¨çš„å¯åŠ¨ï¼Œå› ä¸ºæœ‰ä¸€äº›æ˜ å°„çš„ç»å¯¹è·¯å¾„ä»ç„¶å¿…é¡»ä½¿ç”¨ Ubuntu ä¸‹çš„ç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚ä½¿ç”¨ cifs-utils æŒ‚è½½äº† SMB ç¡¬ç›˜çš„è·¯å¾„ä»¥åŠ dockerçš„å¥—æ¥å­— `/var/run/docker.sock`ç­‰ç­‰ã€‚

### 3. æ•°æ®å¤‡ä»½

åœ¨ä¸Šä¸€æ­¥æŠŠæ‰€æœ‰çš„ docker é…ç½®åŠæ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªåœ°æ–¹ä¹‹åï¼Œå°±å¯ä»¥åˆ©ç”¨å„ç§ç½‘ç›˜çš„åŒæ­¥åŠŸèƒ½è¿›è¡Œå¤‡ä»½äº†ï¼Œä¹Ÿå¯ä»¥ç”¨[restic](https://github.com/restic/restic)ç­‰å¼€æºé¡¹ç›®æ¥å¤‡ä»½ã€‚

### 4. æ•°æ®æ¸…ç†

æ—¥å¿—

é•œåƒ



## å¸¸ç”¨çš„Dockeré¡¹ç›®

[portainer-ce](https://hub.docker.com/r/6053537/portainer-ce)ï¼šdockerç®¡ç†å·¥å…·ï¼Œæ±‰åŒ–ç‰ˆ

[containrrr/watchtower](https://github.com/containrrr/watchtower)ï¼šè‡ªåŠ¨æ›´æ–°Dockeré•œåƒ

[jeessy2/ddns-go](https://github.com/jeessy2/ddns-go)ï¼šè‡ªåŠ¨è§£æDNSï¼Œç»‘å®šåŸŸå

[whyour/qinglongï¼‰](https://github.com/whyour/qinglong)ï¼šé’é¾™é¢æ¿

[golang-reverseproxy ](https://hub.docker.com/r/qierkang/golang-reverseproxy)ï¼šJrebelç ´è§£

### è‡ªå»ºæœåŠ¡

æ¼«ç”»ï¼š[komga](https://github.com/gotson/komga)

éŸ³ä¹ï¼š[navidrome](https://hub.docker.com/r/deluan/navidrome)

å½±è§†ï¼š[Plex](https://github.com/plexinc/pms-docker)ã€[jellyfin](https://hub.docker.com/r/jellyfin/jellyfin/)ã€[jellyfinç‰¹ä¾›ç‰ˆ](https://hub.docker.com/r/nyanmisaka/jellyfin)

IPTVï¼š[youshandefeiyang/allinone](https://hub.docker.com/r/youshandefeiyang/allinone)+[FanchangWang/allinone_format](https://github.com/FanchangWang/allinone_format)

### ç³»ç»Ÿç›¸å…³

[zzsrv/openwrt](https://hub.docker.com/r/zzsrv/openwrt)ï¼šPassWall & OpenClashï¼ŒåŸºäºImmortalWrt OpenWrt-23.05(æ¯æ—¥æ›´æ–°)ã€‚

[piaoyizy/openwrt-x86](https://hub.docker.com/r/piaoyizy/openwrt-x86)ï¼šåŸºäºLean-X86æœ€æ–°æºç ç¼–è¯‘ï¼Œé›†æˆssrplus+ï¼Œopenclashï¼Œpasswallï¼Œ
